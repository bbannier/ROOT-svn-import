<html>
<head><link href="../cscroot.css" rel="stylesheet" type="text/css"><title>ROOT Exercise I - Solution</title></head>
<body class="solution">
<h1>ROOT Exercise I - Solution</h1>
<p>Got stuck? This is the solution</p>
<h2>2 Constructors and alike</h2>
<div class="exercise">
We continue to use <a href="test_motorcycle.C" class="source">test_motorcycle.C</a>.
      As you can see the macro has a bug - instead of five motorcycles it only displays one kind
      of motorcycles. Fix that!
</div>

As the lecture describes, you must have to pass a pointer to the TMotorcycle object <tt>mybike</tt>
and use the pointer inside the function to really change the original object itself.
<p>You will have to replace all method calls from "dot" (e.g. <tt>mybike.SetBrand(brand)</tt> to "arrow"
(e.g. <tt>mybike-&gt;SetBrand(brand))</tt>.
Before objects were passed around, which got copied again and again,
which in turn invokes the assignment operator and the copy constructor etc.
Passing a pointer to the original object make each function accessing 
the same and unique object, without copying it each time</p>
<pre>

#include "Riostream.h"
#include "Motorcycle.h"

void setproperties(TMotorcycle *mybike, const char *brand, const char *model, Int_t cap, Float_t power)
{
   // function setting (changing) parameters of the TMotorcycle class
   // passed in argument

   // set the brand
   mybike-&gt;SetBrand(brand);
   // set the model
   mybike-&gt;SetModel(model);
   // set the cubic capacity
   mybike-&gt;SetCubicCap(cap);
   // set the power
   mybike-&gt;SetPower(power);
}

void printinfos(TMotorcycle *mybike)
{
   // function printing parameters of the TMotorcycle class
   // pointer passed in argument

   // dump infos on the terminal
   cout << "Brand: " << mybike-&gt;GetBrand();
   cout << " - Model: " << mybike-&gt;GetModel();
   cout << " - Cubic Capacity: " << mybike-&gt;GetCubicCap();
   cout << " - Power: " << mybike-&gt;GetPower() << endl;
}

void test_motorcycle()
{
   // main function

   // load the library containing the TMotorcycle class 
   // implementation
   gSystem-&gt;Load("Motorcycle_C");
   // create a canvas to display pictures of the motorcycles
   TCanvas *c1 = new TCanvas("c1", "Pictures", 1200, 600);
   // divide the canvas
   c1-&gt;Divide(3, 2);
   // create a new TMotorcycle class with some values
   TMotorcycle *mybike = new TMotorcycle("Honda", "VTX1300S", 1312, 55);
   // verify the class member values
   printinfos(mybike);
   // go to the 1st pad
   c1-&gt;cd(1);
   // display picture of the motorcycle
   mybike-&gt;ShowPicture();
   // change the values
   setproperties(mybike, "Suzuki", "M800Z", 805, 39);
   // and verify the values have been changed
   printinfos(mybike);
   // go to the 2d pad
   c1-&gt;cd(2);
   // display picture of the motorcycle
   mybike-&gt;ShowPicture();
   // change values
   setproperties(mybike, "Yamaha", "XVS1300A", 1304, 53.5);
   // verify
   printinfos(mybike);
   // go to the 3rd pad
   c1-&gt;cd(3);
   // display picture of the motorcycle
   mybike-&gt;ShowPicture();
   // change values
   setproperties(mybike, "Kawasaki", "VN900C", 903, 37);
   // verify
   printinfos(mybike);
   // go to the 4th pad
   c1-&gt;cd(4);
   // display picture of the motorcycle
   mybike-&gt;ShowPicture();
   // change values
   setproperties(mybike, "Harley-Davidson", "FXCWC", 1584, 49.236);
   // verify
   printinfos(mybike);
   // go to the 5th pad
   c1-&gt;cd(5);
   // display picture of the motorcycle
   mybike-&gt;ShowPicture();
   c1-&gt;cd();
}

</pre>
</body>
</html>
